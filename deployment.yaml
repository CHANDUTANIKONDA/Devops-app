apiVersion: apps/v1
kind: Deployment
metadata:
    name: devops-app
    spec:
        replicas: 2
            selector:
                  matchLabels:
                          app: devops-app
                              template:
                                    metadata:
                                            labels:
                                                      app: devops-app
                                                            spec:
                                                                    containers:
                                                                            - name: devops-app
                                                                                      image: chnadu/devops-app:latest
                                                                                                ports:
                                                                                                          - containerPort: 3000

                                                                                                                    startupProbe:
                                                                                                                                httpGet:
                                                                                                                                              path: /
                                                                                                                                                            port: 3000
                                                                                                                                                                        failureThreshold: 30
                                                                                                                                                                                    periodSeconds: 10

                                                                                                                                                                                              readinessProbe:
                                                                                                                                                                                                          httpGet:
                                                                                                                                                                                                                        path: /
                                                                                                                                                                                                                                      port: 3000
                                                                                                                                                                                                                                                  initialDelaySeconds: 5
                                                                                                                                                                                                                                                              periodSeconds: 5

                                                                                                                                                                                                                                                                        livenessProbe:
                                                                                                                                                                                                                                                                                    httpGet:
                                                                                                                                                                                                                                                                                                  path: /
                                                                                                                                                                                                                                                                                                                port: 3000
                                                                                                                                                                                                                                                                                                                            initialDelaySeconds: 15
                                                                                                                                                                                                                                                                                                                                        periodSeconds: 10

